# RESTful API

### REST 란

- REST: Representational State Transfer의 약자

  - 자원을 이름으로 구분하여 해당 자원의 상태를 주고 받는 모든 것

    ex) 학생의 정보가 자원일 때, `student`로 자원을 표현

  - 월드 와이드 웹과 같은 분산 하이퍼미디어 시스템을 위한 소프트웨어 개발 아키텍처의 형식

    - HTTP를 사용하기 때문에 웹의 장점을 최대한 활용할 수 있는 아키텍처
    - Client Server 간 통식 방식

### 세부 내용

- HTTP URI(Uniform Resource Identifier)를 통해 자원 (Resource)를 명시하고, Method(POST, GET, PUT, DELETE)를 통해 해당 자원에 대한 CRUD 를 적용한다.
  - 자원 기반의 구조(Resource Oriented Architecture)
  - HTTP Method에 의한 자원 처리 설계



### 장점

1. HTTP의 인프라를 사요하므로 REST API 사용을 위한 별도의 인프라 구축이 필요 없다
2. 1에 의거하여 HTTP를 따르는 모든 플랫폼에서 장점을 갖는다.
3. Hypermedia API의 기본을 지키며 범용성이 있다.
4. 메시지가 의도하는 바를 쉽게 파악할 수 있다.
5. 서버와 클라이언트의 역할을 명확히 분리하여 유연하다.
6. 다양한 프로그래밍언어로 작성할 수 있어 API 설계가 독립적이다.



### 단점

1. 표준이 존재 하지 않는다.
2. Method가 4가지 밖에 없다.



### 필요 이유

1. 앱의 분리 및 통합
2. 다양한 클라이언트의 등장
   - 최근 서버는 다양한 브라우저 및 디바이스에도 차이가 있다.



### 구성 요소

1. 자원(Resource) : URI
   - 모든 자원에 고유한 ID가 존재
   - Client는 URI를 통해 자원을 지정 => Server에 요청
2. 행위(Verb) : HTTP Method
   - HTTP Method를 사용
   - GET(R), POST(C), PUT(U, Patch), DELETE(D)
3. 표현(Representation of Resource)
   - Client가 자원의 상태에 대한 조작을 요청 => 서버는 응답(Representation)
   - JSON, XML, TEXT, RSS등의 여러 형태가 존재



### 특징

1. Server-Client 구조

   - 서버는 API를 제공, 자원의 관리 저장
   - 클라이언트는 사용자의 인증등을 관리

2. Stateless(무상태)

   - 서버가 이전의 모든 요청과 독립적으로 요청을 완료하는 통신 방법

   - HTTP 는 Stateless Protocol이므로 REST는 무상태성
   - 클라이언트의 context를 서버에 저장하지 않음 => 구현의 단순화
   - 서버는 각각의 요청을 완전히 별개의 것으로 인식하고 처리 => 서비스의 자유도 상승

3. Cacheable(캐시 가능성)

   - HTTP를 사용하므로 웹의 인프라를 그대로 활용 가능
     - 캐싱 가능
   - 대량의 요청을 효율적으로 처리하기 위해 캐싱
   - 서버 트랜잭션 방지 및 서버 자원 이용률 향상

4. Layered System(계층화)

   - 클라이언트는 서버만 호출 => 계층이 클라이언트에게 보이지 않음
   - 서버는 다중 계층으로 구성 가능
     - 순수 로직, 보안, 로드 밸런싱, 암호화, 사용자 인증 등등
   - 프록시, 게이트웨이 같은 네트워크 기반 매체 사용 가능

5. Code On Demand(Op)

   - 서버가 스크립트를 클라이언트에 전송하여 클라이언트 기능을 일시적으로 확장 or 사용자 지정 가능

   - 서버로부터 스크립트를 받아 클라이언트에서 실행

6. Uniform Interface(인터페이스 일관성)

   - 요청을 통해 리소스를 식별해야 하기 때문

   - URI로 지정한 자원에 조작을 통일되고 일관된 인터페이스로 수행
   - HTTP 에 따르는 모든 플랫폼에 사용 가능



### 규칙

Document : 객체 인스턴스 및 데이터 베이스 레코드와 비슷한 개념

Collection : 서버에서 관리하는 경로

Store : 클라이언트에서 관리하는 저장소

1. URI는 자원을 표현 가능해야 한다.

   - **동사보다는 명사, 소문자를 주로 사용**
   - Doc은 단수명사 사용
   - Collection은 복수 명사를 사용
   - Store의 이름은 복수 명사를 사용

2. 자원에 대한 행위는 HTTP Method를 통해 표현한다.

   - URI에 Method가 들어가면 안됨.

   - **URI에 동사 표현이 들어가면 안됨**

   - 경로중 가변 부분은 유일 값으로 대체

     ex) `DELETE/students/12`

3. `/`는 계층 관계를 나타내는데 사용한다.

   - 마지막에 사용되지 않음
   - ex)`/members/students`

4. `-`는 가독성을 높이는데 사용한다.

5. `_`는 사용하지 않는다.

6. 확장자는 URI에 포함하지 않는다.

7. 리소스간 연관 관계가 있는 경우

   - /리소스 명/ ID/ 관계 리소스와 같이 표현



### Method

HTTP를 사용할 때의 일반적인 4개의 메서드는 다음과 같다.

1. GET

   - 클라이언트는 GET을 사용하여 서버의 지정된 URL에 있는 리소스에 액세스한다.

   - RESTful API 요청에 파라미터(경로, 쿼리, 쿠키(인증용))를넣어 전송

2. POST

   - 서버에 데이터를 전송한다.
   - 요청과 함께 데이터의 표현이 포함된다.

3. PUT

   - 클라이언트는 PUT을 이용하여 기존 리소스를 업데이트한다.
   - POST와 달리 같은 요청을 여러 번 전송하여도 결과는 동일

4. DELETE

   - 리소스를 제거한다.
   - 인증을 요구한다.

### HTTP Header

요청 헤더는 클라이언트와 서버 간 교환되는 메타데이터로 요청 헤더는 요청 및 응답의 형식을 나타내고, 요청 상태 등에 대한 정보를 제공한다.



### HTTP 인증

HTTP에서는 REST API를 구현할 때 직접 사용할 수 있는 일부 인증 체계를 정의한다.

1. 기본 인증

   - 요청 헤더에 사용자의 이름과 암호를 넣어 전송

   - 안전한 전송을 위해 64자의 세트로 변환하는 base64로 인코딩

2. 전달자 인증

   - bearer인증이라는 용어로 토큰 전달자에 대한 엑세스 제어를 제공하는 프로세스

   - 토큰은 로그인 요청에 대한 응답으로 생성하는 암호화된 문자열

   - 클라이언트는 헤더에 토큰을 넣어 전송함

     API키, OAuth를 사용 가능



### 서버 응답

REST 원칙에 따라 다음과 같은 요소를 포함해야 한다.

1. 상태 표시줄

   - 요청 성공 또는 실패를 알리는 3자리 사애 코드

     `200` : 응답 성공

     `201` : POST 응답 성공

     `400` : 서버가 처리할 수 없는 잘못된 요청

     `404` : 리소스를 찾을 수 없음

2. 본문

   - 요청 헤더에 포함된 내용을 기반으로 적절한 표현 방식으로 응답

3. 헤더

   - 응답에 대한 헤더 또는 메타데이터를 포함
   - 응답에 대한 추가 컨텍스트를 제공(서버, 인코딩, 날짜, 콘텐츠 유형 등)

`https://docs.github.com/ko/rest?apiVersion=2022-11-28`